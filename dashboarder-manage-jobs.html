<!doctype html>
<html lang="en">
<head>
    <title>Gradforce</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/colors/blue.css">
</head>
<body class="gray">
    <div id="wrapper">

        <!-- Header -->
        <header id="header-container" class="fullwidth dashboard-header not-sticky">
            <div id="header">
                <div class="container">
                    <div class="left-side">
                        <div id="logo">
                            <a href="index.html"><img src="images/logo.png" alt=""></a>
                        </div>

                        <!-- Main Nav -->
                        <nav id="navigation">
                            <ul id="responsive">
                                <li><a href="index.html" class="current">Home</a>
                                    <ul class="dropdown-nav">
                                        <li><a href="index.html">main page</a></li>
                                    </ul>
                                </li>
                                <li><a href="#">Find Work</a>
                                    <ul class="dropdown-nav">
                                        <li><a href="#">Browse Jobs</a>
                                            <ul class="dropdown-nav">
                                                <li><a href="jobs-list-layout-1.html">List job</a></li>
                                            </ul>
                                        </li>
                                        <li><a href="#">Browse Tasks</a>
                                            <ul class="dropdown-nav">
                                                <li><a href="tasks-list-layout-1.html">List task</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li><a href="#">For Employers</a>
                                    <ul class="dropdown-nav">
                                        <li><a href="dashboard-post-a-job.html">Post a Job</a></li>
                                        <li><a href="dashboard-post-a-job.html">Post a Task</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </nav>
                        <div class="clearfix"></div>
                    </div>
                    <div class="right-side">

                        <div class="header-widget">
                            <!-- Messages -->
                            <div class="header-notifications user-menu">
                                <div class="header-notifications-trigger">
                                    <a href="#">
                                        <div class="user-avatar status-online"><img src="images/user-avatar-small-01.jpg" alt=""></div>
                                    </a>
                                </div>
                                <!-- Dropdown -->
                                <div class="header-notifications-dropdown">
                                    <!-- User Status -->
                                    <div class="user-status">
                                        <!-- User Name / Avatar -->
                                        <div class="user-details">
                                            <div class="user-avatar status-online"><img src="images/user-avatar-small-01.jpg" alt=""></div>
                                            <div class="user-name">
                                                <span id="username"></span> <span id="user_type"></span>
                                            </div>
                                        </div>
                                        <!-- User Status -->
                                        <div class="status-switch" id="snackbar-user-status">
                                            <label class="user-online current-status">Online</label>
                                            <label class="user-invisible">OffLine</label>
                                            <!-- Status Indicator -->
                                            <span class="status-indicator" aria-hidden="true"></span>
                                        </div>
                                    </div>
                                    <ul class="user-menu-small-nav">
                                        <li><a href="dashboard.html"><i class="icon-material-outline-dashboard"></i> Dashboard</a></li>
                                        <li><a href="logout.php"><i class="icon-material-outline-power-settings-new"></i> Logout</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <span class="mmenu-trigger">
							<button class="hamburger hamburger--collapse" type="button">
								<span class="hamburger-box">
									<span class="hamburger-inner"></span>
                        </span>
                        </button>
                        </span>
                    </div>
                </div>
            </div>
        </header>
        <div class="clearfix"></div>
        <div class="dashboard-container">

            <!-- Dashboard  -->
            <div class="dashboard-sidebar">
                <div class="dashboard-sidebar-inner" data-simplebar>
                    <div class="dashboard-nav-container">
                        <!-- Responsive Nav for mobile -->
                        <a href="#" class="dashboard-responsive-nav-trigger">
                            <span class="hamburger hamburger--collapse">
								<span class="hamburger-box">
									<span class="hamburger-inner"></span>
                            </span>
                            </span>
                            <span class="trigger-title">Dashboard Navigation</span>
                        </a>

                        <!-- Nav -->
                        <div class="dashboard-nav">
                            <div class="dashboard-nav-inner">
                                <ul data-submenu-title="Start">
                                    <li><a href="dashboarder.html"><i class="icon-material-outline-dashboard"></i> Dashboard</a></li>
                                </ul>
                                <ul data-submenu-title="Organize and Manage">
                                    <li class="active-submenu"><a href="#"><i class="icon-material-outline-business-center"></i> Jobs</a>
                                        <ul>
                                            <li><a href="dashboarder-manage-jobs.html">Manage Jobs</a></li>
                                            <li><a href="dashboarder-manage-candidates.html">Manage Candidates</a></li>
                                            <li><a href="dashboarder-post-a-job.html">Post a Job</a></li>
                                        </ul>
                                    </li>
                                </ul>
                                <ul data-submenu-title="Account">
                                    <li><a href="index-logged-out.html"><i class="icon-material-outline-power-settings-new"></i> Logout</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Content -->
            <div class="dashboard-content-container" data-simplebar>
                <div class="dashboard-content-inner">
                    <div class="dashboard-headline">
                        <h3>Manage Jobs</h3>

                        <!-- Breadcrumbs -->
                        <nav id="breadcrumbs" class="dark">
                            <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">Dashboard</a></li>
                                <li>Manage Jobs</li>
                            </ul>
                        </nav>
                    </div>
                    <div class="row">
                        <div class="col-xl-12">
                            <div class="dashboard-box margin-top-0">
                                <div class="headline">
                                    <h3><i class="icon-material-outline-business-center"></i> My Job Listings</h3>
                                </div>
                                <div class="content">
                                    <ul class="dashboard-box-list" id="job_list">
                                        <li>
                                            <div class="job-listing">
                                                <div class="job-listing-details">

                                                    <!-- Footer -->
                                                    <div class="dashboard-footer-spacer"></div>
                                                    <div class="small-footer margin-top-15">
                                                        <div class="small-footer-copyrights">
                                                            Â© 2019 <strong>Gradforce</strong>.
                                                        </div>

                                                        <div class="clearfix"></div>
                                                    </div>
                                                </div>
                                            </div>
                                </div>
                            </div>

                            <!-- Scripts -->
                            <script src="js/jquery-3.4.1.min.js"></script>
                            <script src="js/jquery-migrate-3.1.0.min.js"></script>
                            <script src="js/mmenu.min.js"></script>
                            <script src="js/tippy.all.min.js"></script>
                            <script src="js/simplebar.min.js"></script>
                            <script src="js/bootstrap-slider.min.js"></script>
                            <script src="js/bootstrap-select.min.js"></script>
                            <script src="js/snackbar.js"></script>
                            <script src="js/clipboard.min.js"></script>
                            <script src="js/counterup.min.js"></script>
                            <script src="js/magnific-popup.min.js"></script>
                            <script src="js/slick.min.js"></script>
                            <script src="js/custom.js"></script>

                            <!-- Snackbar // documentation: https://www.polonel.com/snackbar/ -->
                            <script>
                                // Snackbar for user status switcher
                                $('#snackbar-user-status label').click(function() {
                                    Snackbar.show({
                                        text: 'Your status has been changed!',
                                        pos: 'bottom-center',
                                        showAction: false,
                                        actionText: "Dismiss",
                                        duration: 3000,
                                        textColor: '#fff',
                                        backgroundColor: '#383838'
                                    });
                                });
                            </script>

</body>
</html>
<script>
    var tabData = "";
    $(document).ready(function() {
        initVar();
        $.ajax({
            async: false,
            url: 'get_job_list.php',
            data: {},
            type: 'get',
            dataType: 'text',
            success: function(data) {
                tabData = data;
                initVar();
                StrToArr(tabData);
            }
        });
    });

    function initVar() {
        tabDom = $('#tab');
    }

    function StrToArr(str) {
        var arr = str.split('^');
        var brr = [];
        for (var i in arr) {
            brr.push(arr[i].split(','));
        }
        initHtml(brr);
    }

    // make the list from database to website 
    function initHtml(arr) {
        var str = "";
        if (arr[0] != null) {
            for (var i in arr) {
                str += '<li><div class="job-listing"><div class="job-listing-details"><div class="job-listing-description"><h3 class="job-listing-title">';
                //job name
                str += '<a href="jobs-list">' + arr[i][1] + '</a> <span class="dashboard-status-button green">Listing</span></h3>'
                str += '<a href="jobs-list">' + arr[i][10] + '</a> </h3>'
                str += '<div class="job-listing-footer"><ul>';
                //post date
                str += '<li><i class="icon-material-outline-date-range"></i> ' + 'Posted email ' + arr[i][11] + '</li>';
                str += '<li><i class="icon-material-outline-date-range"></i> ' + 'Post on ' + arr[i][12] + ' </li>';
                str += '</ul></div></div></div></div><div class="buttons-to-right always-visible"><a href="dashboard-manage-candidates.html" class="button ripple-effect"><i class="icon-material-outline-supervisor-account"></i> Manage Candidates </a>'
                    //delete
                str += '<span onclick = "deleteJob(' + arr[i][0] + ')" class="button gray ripple-effect ico" title="Remove" data-tippy-placement="top"><i class="icon-feather-trash-2"></i></span></div></li>';
            }
        }
        $('#job_list').html(str);

    }

    function deleteJob(i) {
        $.ajax({
            async: false,
            url: 'delete_job.php',
            data: {
                id: i
            },
            type: 'post',
            dataType: 'text',
            success: function(data) {
                $.ajax({
                    async: false,
                    url: 'get_job_list.php',
                    data: {},
                    type: 'get',
                    dataType: 'text',
                    success: function(data) {
                        tabData = data;
                        initVar();
                        StrToArr(tabData);
                    }
                });
            }
        });
    }
    // how to make the user work start 
    var tabData = "";
    //request userinfo for icon and buttons
    $(document).ready(function() {
        $.ajax({
            async: false,
            url: 'user_info.php',
            data: {},
            type: 'get',
            dataType: 'text',
            success: function(data) {
                tabData = data;
                showUser(tabData);
                $("#login_div").show()
            }
        });
    });

    function showUser(str) {
        var arr = str.split('^');
        var brr = [];
        for (var i in arr) {
            brr.push(arr[i].split(','));
        }
        if (brr[0] == null || brr[0] == "" || brr[0] == undefined) {
            $("#login_div").html('<a href="pages-login.html"><i class="icon-material-outline-power-settings-new"></i> LogIn</a>');
        } else {
            $('#username').html(brr[0]);
            $("#user_type").html(brr[2]);
        }
    }
    // finish
</script>